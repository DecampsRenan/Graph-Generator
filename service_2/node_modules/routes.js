// On ajoute les d√©pendances
<<<<<<< HEAD
var app = global.app;

app.post('/get', function(req, res) {

	var graphe = reg.query.graphe,
		source = graphe.nodes[graphe.nodes.lenght-1].data.id,
		sommets  = [],
		distance = [],
		d;
	
	console.log('graphe');

	for (var i=0; i < graphe.nodes.lenght-1; i++) {
=======
var app    = global.app,
	Dijkstra = require('./Dijkstra');

app.post('/get', function(req, res) {

	var graphe = {
		nodes: [
			{ data: { id: '1' } },
			{ data: { id: '2' } },
			{ data: { id: '3' } },
			{ data: { id: '4' } },
			{ data: { id: '5' } },
			{ data: { id: '6' } },
			{ data: { id: '7' } },
			{ data: { id: '8' } },
			{ data: { id: '9' } },
			{ data: { id: '0' } }
		],

		edges: [
			{ data: { id: '01', weight: 3, source: '0', target: '1' } },
			{ data: { id: '02', weight: 5, source: '0', target: '2' } },
			{ data: { id: '03', weight: 2, source: '0', target: '3' } },
			{ data: { id: '04', weight: 6, source: '0', target: '4' } },
			{ data: { id: '05', weight: 1, source: '0', target: '5' } },
			{ data: { id: '06', weight: 1, source: '0', target: '6' } },
			{ data: { id: '07', weight: 8, source: '0', target: '7' } },
			{ data: { id: '18', weight: 4, source: '1', target: '8' } },
			{ data: { id: '19', weight: 9, source: '1', target: '9' } }
		]
	};
	//var graphe = reg.query.graphe;
	var source = graphe.nodes[0].data.id, 
	sommets = [], 
	distance = [], 
	d;
	
	for (var i=1; i < graphe.nodes.length; i++) {
>>>>>>> origin/master
		sommets.push(graphe.nodes[i].data.id);
		distance.push('x');
	}
	for (var j=0; j < graphe.edges.length; j++) {

		if (graphe.edges[j].data.source == source) {
<<<<<<< HEAD
				distance[parseInt(graphe.edges[j].data.target)-1]=graphe.edges[j].data.weight;
				graphe.split(graphe.edges[j],1);
		}
=======
			distance[parseInt(graphe.edges[j].data.target)-1]=graphe.edges[j].data.weight;
			graphe.edges.splice(j,1);
		}	
>>>>>>> origin/master
	}
	console.log(graphe);
	d = new Dijkstra(source, sommets, distance, graphe);

	res.set({
		'Access-Control-Allow-Origin': '*'
	});

	console.log(d.path);
	res.json(d.path);
});
