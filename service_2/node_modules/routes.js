// On ajoute les d√©pendances
var app      = global.app,
	Dijkstra = require('./Dijkstra');

app.post('/get', function(req, res) {
	var g = req.query.graphe;
	console.log(req.params);
	
	var source   = graphe.nodes[0].data.id,
		sommets  = [],
		distance = [],
		d;
	
	for (var i=1; i < graphe.nodes.length; i++) {
		sommets.push(parseInt(graphe.nodes[i].data.id));
		distance.push('x');
	}

	for (var j=0; j < graphe.edges.length; j++) {
		if (graphe.edges[j].data.source == source && graphe.edges[j].data.id) {
			distance[parseInt(graphe.edges[j].data.target)-2]=parseInt(graphe.edges[j].data.weight);
			graphe.edges.splice(j,1);
			j--;
		}	
	}
	
	d = new Dijkstra(source, sommets, distance, graphe);
	
	res.set({
		'Access-Control-Allow-Origin': '*',
		'Access-Control-Allow-Credentials': true
	});
	res.json(d.path);
});
