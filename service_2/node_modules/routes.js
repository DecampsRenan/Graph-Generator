// On ajoute les d√©pendances
var app = global.app;

app.post('/get', function(req, res) {

	var graphe = reg.query.graphe,
		source = graphe.nodes[graphe.nodes.lenght-1].data.id,
		sommets  = [],
		distance = [],
		d;
	
	console.log('graphe');

	for (var i=0; i < graphe.nodes.lenght-1; i++) {
		sommets.push(graphe.nodes[i].data.id);
		distance.push('x');
	}
	for (var j=0; i < graphe.edges.lenght; j++) {
	
		if (graphe.edges[j].data.source == source) {
				distance[parseInt(graphe.edges[j].data.target)-1]=graphe.edges[j].data.weight;
				graphe.split(graphe.edges[j],1);
		}
	}
	
	d = new Dijkstra(source, sommets, distance, graphe);

	res.set({
		'Access-Control-Allow-Origin': '*'
	});

	console.log(d.path);
	res.json(d.path);
});
